apiVersion: "nuclio.io/v1"
kind: NuclioFunction
metadata:
  name: mjpeg-to-webhook
  namespace: nuclio
spec:
  runtime: python
  handler: test_handler:handler_serve
  triggers:
    mjpeg:
      kind: mjpeg
      attributes:
        url: "http://77.222.181.11:8080/mjpg/video.mjpg"
        processing_factor: 5
        sink:
          kind: webhook
          attributes:
            url: "http://localhost:8888/webhook"
            method: "POST"
            headers:
              Content-Type: "application/json"
              X-API-Key: "test-api-key-12345"
            timeout: 10
            maxRetries: 3
            retryDelay: 1
      maxWorkers: 4
